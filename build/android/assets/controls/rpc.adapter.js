var Moment=require("vendor/moment"),XMLTools=require("vendor/XMLTools"),toType=function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()};module.exports=function(e){var o=e.date?e.url.replace(/_DATE_/gm,e.date):e.url;if(!e.nocache&&Ti.App.Properties.hasProperty(o))return e.onload(JSON.parse(Ti.App.Properties.getString(o))),void console.log("delivering of cached infos");var t=Ti.Network.createHTTPClient({onload:function(){var t=new XMLTools(this.responseXML).toObject();t.item&&"array"!=toType(t.item)&&(t.item=[t.item]);var i={payload:t,hash:Ti.Utils.md5HexDigest(this.responseText)};Ti.App.Properties.setString(o,JSON.stringify(i)),e.onload(i),console.log("Info: rendering ready")}});t.open("GET",o),t.send()};